<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sobreviv√™ncia na Selva</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        const HeartIcon = ({ filled, size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill={filled ? "currentColor" : "none"} stroke="currentColor" strokeWidth="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
            </svg>
        );

        const JungleSurvivalGame = () => {
            const [gameState, setGameState] = useState('menu');
            const [player, setPlayer] = useState({ x: 200, y: 300 });
            const [hearts, setHearts] = useState(0);
            const [lives, setLives] = useState(3);
            const [fruits, setFruits] = useState([]);
            const [animals, setAnimals] = useState([]);
            const [lions, setLions] = useState([]);
            const [keys, setKeys] = useState({});
            const [invulnerable, setInvulnerable] = useState(false);

            const CANVAS_WIDTH = 800;
            const CANVAS_HEIGHT = 600;
            const PLAYER_SIZE = 30;
            const FRUIT_SIZE = 20;
            const ANIMAL_SIZE = 25;
            const LION_SIZE = 35;
            const PLAYER_SPEED = 5;

            const startGame = () => {
                setGameState('playing');
                setPlayer({ x: 200, y: 300 });
                setHearts(0);
                setLives(3);
                setFruits([]);
                setAnimals([]);
                setLions([]);
                setInvulnerable(false);
            };

            useEffect(() => {
                if (gameState !== 'playing') return;
                
                const interval = setInterval(() => {
                    setFruits(prev => [...prev, {
                        id: Math.random(),
                        x: Math.random() * (CANVAS_WIDTH - FRUIT_SIZE),
                        y: Math.random() * (CANVAS_HEIGHT - FRUIT_SIZE),
                        type: Math.random() > 0.5 ? 'apple' : 'banana'
                    }]);
                }, 3000);

                return () => clearInterval(interval);
            }, [gameState]);

            useEffect(() => {
                if (gameState !== 'playing') return;
                
                const interval = setInterval(() => {
                    setAnimals(prev => [...prev, {
                        id: Math.random(),
                        x: Math.random() * (CANVAS_WIDTH - ANIMAL_SIZE),
                        y: Math.random() * (CANVAS_HEIGHT - ANIMAL_SIZE),
                        vx: (Math.random() - 0.5) * 2,
                        vy: (Math.random() - 0.5) * 2
                    }]);
                }, 4000);

                return () => clearInterval(interval);
            }, [gameState]);

            useEffect(() => {
                if (gameState !== 'playing') return;
                
                const interval = setInterval(() => {
                    setLions(prev => [...prev, {
                        id: Math.random(),
                        x: Math.random() * (CANVAS_WIDTH - LION_SIZE),
                        y: Math.random() * (CANVAS_HEIGHT - LION_SIZE)
                    }]);
                }, 5000);

                return () => clearInterval(interval);
            }, [gameState]);

            useEffect(() => {
                const handleKeyDown = (e) => {
                    setKeys(prev => ({ ...prev, [e.key]: true }));
                };

                const handleKeyUp = (e) => {
                    setKeys(prev => ({ ...prev, [e.key]: false }));
                };

                window.addEventListener('keydown', handleKeyDown);
                window.addEventListener('keyup', handleKeyUp);

                return () => {
                    window.removeEventListener('keydown', handleKeyDown);
                    window.removeEventListener('keyup', handleKeyUp);
                };
            }, []);

            useEffect(() => {
                if (gameState !== 'playing') return;

                const interval = setInterval(() => {
                    setPlayer(prev => {
                        let newX = prev.x;
                        let newY = prev.y;

                        if (keys['ArrowLeft'] || keys['a']) newX -= PLAYER_SPEED;
                        if (keys['ArrowRight'] || keys['d']) newX += PLAYER_SPEED;
                        if (keys['ArrowUp'] || keys['w']) newY -= PLAYER_SPEED;
                        if (keys['ArrowDown'] || keys['s']) newY += PLAYER_SPEED;

                        newX = Math.max(0, Math.min(CANVAS_WIDTH - PLAYER_SIZE, newX));
                        newY = Math.max(0, Math.min(CANVAS_HEIGHT - PLAYER_SIZE, newY));

                        return { x: newX, y: newY };
                    });
                }, 1000 / 60);

                return () => clearInterval(interval);
            }, [keys, gameState]);

            useEffect(() => {
                if (gameState !== 'playing') return;

                const interval = setInterval(() => {
                    setAnimals(prev => prev.map(animal => {
                        let newX = animal.x + animal.vx;
                        let newY = animal.y + animal.vy;

                        if (newX <= 0 || newX >= CANVAS_WIDTH - ANIMAL_SIZE) animal.vx *= -1;
                        if (newY <= 0 || newY >= CANVAS_HEIGHT - ANIMAL_SIZE) animal.vy *= -1;

                        newX = Math.max(0, Math.min(CANVAS_WIDTH - ANIMAL_SIZE, newX));
                        newY = Math.max(0, Math.min(CANVAS_HEIGHT - ANIMAL_SIZE, newY));

                        return { ...animal, x: newX, y: newY };
                    }));
                }, 1000 / 60);

                return () => clearInterval(interval);
            }, [gameState]);

            useEffect(() => {
                if (gameState !== 'playing') return;

                const interval = setInterval(() => {
                    setLions(prev => prev.map(lion => {
                        const dx = player.x - lion.x;
                        const dy = player.y - lion.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        
                        if (dist > 0) {
                            const speed = 2;
                            return {
                                ...lion,
                                x: lion.x + (dx / dist) * speed,
                                y: lion.y + (dy / dist) * speed
                            };
                        }
                        return lion;
                    }));
                }, 1000 / 60);

                return () => clearInterval(interval);
            }, [player, gameState]);

            useEffect(() => {
                if (gameState !== 'playing') return;

                setFruits(prev => prev.filter(fruit => {
                    const dx = player.x - fruit.x;
                    const dy = player.y - fruit.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < PLAYER_SIZE / 2 + FRUIT_SIZE / 2) {
                        setHearts(h => h + 1);
                        return false;
                    }
                    return true;
                }));

                setAnimals(prev => prev.filter(animal => {
                    const dx = player.x - animal.x;
                    const dy = player.y - animal.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < PLAYER_SIZE / 2 + ANIMAL_SIZE / 2) {
                        setHearts(h => h + 1);
                        return false;
                    }
                    return true;
                }));

                if (!invulnerable) {
                    setLions(prev => prev.filter(lion => {
                        const dx = player.x - lion.x;
                        const dy = player.y - lion.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < PLAYER_SIZE / 2 + LION_SIZE / 2) {
                            setLives(l => l - 1);
                            setInvulnerable(true);
                            setTimeout(() => setInvulnerable(false), 2000);
                            return false;
                        }
                        return true;
                    }));
                }
            }, [player, gameState, invulnerable]);

            useEffect(() => {
                if (hearts >= 100) {
                    setGameState('won');
                }
                if (lives <= 0) {
                    setGameState('lost');
                }
            }, [hearts, lives]);

            return (
                <div style={{
                    display: 'flex',
                    flexDirection: 'column',
                    alignItems: 'center',
                    justifyContent: 'center',
                    minHeight: '100vh',
                    background: 'linear-gradient(to bottom, #166534, #16a34a)',
                    padding: '16px'
                }}>
                    {gameState === 'menu' && (
                        <div style={{
                            textAlign: 'center',
                            backgroundColor: '#14532d',
                            padding: '32px',
                            borderRadius: '8px',
                            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                        }}>
                            <h1 style={{
                                fontSize: '36px',
                                fontWeight: 'bold',
                                color: '#fde047',
                                marginBottom: '16px'
                            }}>üå¥ Sobreviv√™ncia na Selva üå¥</h1>
                            <p style={{ color: 'white', marginBottom: '8px' }}>Use as setas ou WASD para mover</p>
                            <p style={{ color: 'white', marginBottom: '8px' }}>üçé Colete frutas e üê∞ capture animais para ganhar cora√ß√µes</p>
                            <p style={{ color: 'white', marginBottom: '8px' }}>ü¶Å Evite os le√µes! Voc√™ tem 3 vidas</p>
                            <p style={{ color: 'white', marginBottom: '24px' }}>Meta: 100 cora√ß√µes para vencer!</p>
                            <button 
                                onClick={startGame}
                                style={{
                                    backgroundColor: '#eab308',
                                    color: '#14532d',
                                    fontWeight: 'bold',
                                    padding: '12px 32px',
                                    borderRadius: '8px',
                                    fontSize: '20px',
                                    border: 'none',
                                    cursor: 'pointer'
                                }}
                                onMouseOver={(e) => e.target.style.backgroundColor = '#ca8a04'}
                                onMouseOut={(e) => e.target.style.backgroundColor = '#eab308'}
                            >
                                Iniciar Jogo
                            </button>
                        </div>
                    )}

                    {gameState === 'playing' && (
                        <div style={{ position: 'relative' }}>
                            <div style={{
                                backgroundColor: '#fef3c7',
                                padding: '16px',
                                borderTopLeftRadius: '8px',
                                borderTopRightRadius: '8px',
                                display: 'flex',
                                justifyContent: 'space-between',
                                alignItems: 'center'
                            }}>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                                    <div style={{ color: '#ef4444' }}>
                                        <HeartIcon filled={true} />
                                    </div>
                                    <span style={{ fontSize: '24px', fontWeight: 'bold' }}>{hearts}/100</span>
                                </div>
                                <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>
                                    <span style={{ fontSize: '20px', fontWeight: 'bold' }}>Vidas:</span>
                                    {[...Array(lives)].map((_, i) => (
                                        <div key={i} style={{ color: '#ef4444' }}>
                                            <HeartIcon filled={true} size={24} />
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            <div style={{
                                position: 'relative',
                                backgroundColor: '#15803d',
                                border: '4px solid #14532d',
                                width: CANVAS_WIDTH + 'px',
                                height: CANVAS_HEIGHT + 'px',
                                overflow: 'hidden'
                            }}>
                                <div
                                    style={{
                                        position: 'absolute',
                                        left: player.x + 'px',
                                        top: player.y + 'px',
                                        width: PLAYER_SIZE + 'px',
                                        height: PLAYER_SIZE + 'px',
                                        fontSize: '30px',
                                        transform: 'translate(-50%, -50%)',
                                        opacity: invulnerable ? '0.5' : '1',
                                        transition: 'opacity 0.2s'
                                    }}
                                >
                                    üßí
                                </div>

                                {fruits.map(fruit => (
                                    <div
                                        key={fruit.id}
                                        style={{
                                            position: 'absolute',
                                            left: fruit.x + 'px',
                                            top: fruit.y + 'px',
                                            width: FRUIT_SIZE + 'px',
                                            height: FRUIT_SIZE + 'px',
                                            fontSize: '20px'
                                        }}
                                    >
                                        {fruit.type === 'apple' ? 'üçé' : 'üçå'}
                                    </div>
                                ))}

                                {animals.map(animal => (
                                    <div
                                        key={animal.id}
                                        style={{
                                            position: 'absolute',
                                            left: animal.x + 'px',
                                            top: animal.y + 'px',
                                            width: ANIMAL_SIZE + 'px',
                                            height: ANIMAL_SIZE + 'px',
                                            fontSize: '25px'
                                        }}
                                    >
                                        üê∞
                                    </div>
                                ))}

                                {lions.map(lion => (
                                    <div
                                        key={lion.id}
                                        style={{
                                            position: 'absolute',
                                            left: lion.x + 'px',
                                            top: lion.y + 'px',
                                            width: LION_SIZE + 'px',
                                            height: LION_SIZE + 'px',
                                            fontSize: '35px'
                                        }}
                                    >
                                        ü¶Å
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}

                    {gameState === 'won' && (
                        <div style={{
                            textAlign: 'center',
                            backgroundColor: '#facc15',
                            padding: '32px',
                            borderRadius: '8px',
                            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                        }}>
                            <h1 style={{
                                fontSize: '48px',
                                fontWeight: 'bold',
                                color: '#14532d',
                                marginBottom: '16px'
                            }}>üéâ VIT√ìRIA! üéâ</h1>
                            <p style={{
                                fontSize: '24px',
                                color: '#15803d',
                                marginBottom: '24px'
                            }}>Voc√™ sobreviveu e alcan√ßou 100 cora√ß√µes!</p>
                            <button 
                                onClick={startGame}
                                style={{
                                    backgroundColor: '#15803d',
                                    color: 'white',
                                    fontWeight: 'bold',
                                    padding: '12px 32px',
                                    borderRadius: '8px',
                                    fontSize: '20px',
                                    border: 'none',
                                    cursor: 'pointer'
                                }}
                                onMouseOver={(e) => e.target.style.backgroundColor = '#166534'}
                                onMouseOut={(e) => e.target.style.backgroundColor = '#15803d'}
                            >
                                Jogar Novamente
                            </button>
                        </div>
                    )}

                    {gameState === 'lost' && (
                        <div style={{
                            textAlign: 'center',
                            backgroundColor: '#dc2626',
                            padding: '32px',
                            borderRadius: '8px',
                            boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.25)'
                        }}>
                            <h1 style={{
                                fontSize: '48px',
                                fontWeight: 'bold',
                                color: 'white',
                                marginBottom: '16px'
                            }}>üíî GAME OVER üíî</h1>
                            <p style={{
                                fontSize: '24px',
                                color: 'white',
                                marginBottom: '8px'
                            }}>Voc√™ foi derrotado pelos le√µes!</p>
                            <p style={{
                                fontSize: '20px',
                                color: 'white',
                                marginBottom: '24px'
                            }}>Cora√ß√µes coletados: {hearts}/100</p>
                            <button 
                                onClick={startGame}
                                style={{
                                    backgroundColor: 'white',
                                    color: '#dc2626',
                                    fontWeight: 'bold',
                                    padding: '12px 32px',
                                    borderRadius: '8px',
                                    fontSize: '20px',
                                    border: 'none',
                                    cursor: 'pointer'
                                }}
                                onMouseOver={(e) => e.target.style.backgroundColor = '#f3f4f6'}
                                onMouseOut={(e) => e.target.style.backgroundColor = 'white'}
                            >
                                Tentar Novamente
                            </button>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<JungleSurvivalGame />);
    </script>
</body>
</html>
